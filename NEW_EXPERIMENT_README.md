# æ–°éŸ³æ¨‚å¯¦é©—ç³»çµ±ä½¿ç”¨èªªæ˜

## ğŸ“‹ ç³»çµ±æ¦‚è¿°

é€™æ˜¯ä¸€å€‹å…¨æ–°è¨­è¨ˆçš„éŸ³æ¨‚å¯¦é©—ç³»çµ±ï¼Œç”¨æ–¼è©•ä¼°ä¸åŒéŸ³æ¨‚é¡åˆ¥å°å—æ¸¬è€…çš„å¿ƒç†å’Œç”Ÿç†å½±éŸ¿ã€‚

### **å¯¦é©—è¨­è¨ˆ**
- **å—æ¸¬è€…æ•¸é‡**ï¼š30äºº
- **å¯¦é©—æ¬¡æ•¸**ï¼šæ¯äºº6æ¬¡ï¼ˆæ¯æ¬¡ä¸€å€‹éŸ³æ¨‚é¡åˆ¥ï¼‰
- **éŸ³æ¨‚é¡åˆ¥**ï¼š6ç¨®ï¼ˆNature, Ambient, New-Age, Instrumental, Lo-fi, Therapeuticï¼‰
- **æ¯æ¬¡æ™‚é•·**ï¼šç´„15-20åˆ†é˜
- **çµ„åˆ¥è¨­è¨ˆ**ï¼šAçµ„/Bçµ„ï¼ˆå¹³è¡¡æ­Œæ›²æ’­æ”¾é †åºï¼‰
- **ç”Ÿç†è¨Šè™Ÿè¨˜éŒ„**ï¼šæ”¯æ´ 9 ç¨®ç”Ÿç†è¨Šè™ŸåŒæ­¥è¨˜éŒ„ â­

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### **å•Ÿå‹•ç¨‹å¼**

```bash
# ä¸ä½¿ç”¨ç”Ÿç†è¨Šè™Ÿè¨˜éŒ„
python3 new_experiment.py

# ä½¿ç”¨ç”Ÿç†è¨Šè™Ÿè¨˜éŒ„ â­ æ¨è–¦
python3 new_experiment_with_bio.py

# ä¿®æ”¹æª”æ¡ˆä¸­çš„ DEBUG_MODE = False é€²å…¥æ­£å¼æ¨¡å¼
```

### **å¯¦é©—æµç¨‹**

```
é–‹å§‹é é¢ï¼ˆè¨­å®šåƒæ•¸ï¼‰
  â†“
Baseline (3åˆ†é˜)           â† ç”Ÿç†è¨Šè™Ÿæ¨™è¨˜ï¼šbaseline
  â†“
éŸ³æ¨‚1 (5åˆ†é˜)              â† ç”Ÿç†è¨Šè™Ÿæ¨™è¨˜ï¼šmusic1
  â†“
å•å·1 (3é¡Œ)                â† ç”Ÿç†è¨Šè™Ÿæ¨™è¨˜ï¼šquestionnaire1
  â†“
é–“éš”ä¼‘æ¯1 (è‡³å°‘3åˆ†é˜)       â† ç”Ÿç†è¨Šè™Ÿæ¨™è¨˜ï¼šinterval1
  â†“
éŸ³æ¨‚2 (5åˆ†é˜)              â† ç”Ÿç†è¨Šè™Ÿæ¨™è¨˜ï¼šmusic2
  â†“
å•å·2 (3é¡Œ)                â† ç”Ÿç†è¨Šè™Ÿæ¨™è¨˜ï¼šquestionnaire2
  â†“
é–“éš”ä¼‘æ¯2 (è‡³å°‘3åˆ†é˜)       â† ç”Ÿç†è¨Šè™Ÿæ¨™è¨˜ï¼šinterval2
  â†“
å®Œæˆ                       â† ç”Ÿç†è¨Šè™Ÿæ¨™è¨˜ï¼šcomplete
```

---

## ğŸ“‚ æª”æ¡ˆçµæ§‹

### **å®Œæ•´å°ˆæ¡ˆçµæ§‹**

```
ARMO_EQ_exp1/
â”œâ”€â”€ new_experiment.py                      # æ–°å¯¦é©—å•Ÿå‹•æª”æ¡ˆ
â”œâ”€â”€ new_experiment_with_bio.py             # ç”Ÿç†è¨Šè™Ÿæ•´åˆç‰ˆ â­
â”œâ”€â”€ music_catalog.json                     # éŸ³æ¨‚ç›®éŒ„é…ç½®
â”œâ”€â”€ NEW_EXPERIMENT_README.md               # æœ¬èªªæ˜æ–‡ä»¶
â”œâ”€â”€ PROJECT_STRUCTURE.md                   # å°ˆæ¡ˆçµæ§‹ç¸½è¦½ â­
â”‚
â”œâ”€â”€ bio_signal/                            # ç”Ÿç†è¨Šè™Ÿæ¨¡çµ„ â­
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ bio_signal_manager.py              # ç”Ÿç†è¨Šè™Ÿç®¡ç†å™¨
â”‚   â””â”€â”€ bioDataUtils.py                    # Socket Server & æ•¸æ“šè™•ç†
â”‚
â”œâ”€â”€ labels/                                # æ¨™ç±¤ç®¡ç†æ¨¡çµ„ â­
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ LabelManager.py                    # æ¨™ç±¤ç®¡ç†å™¨
â”‚   â””â”€â”€ experiment_labels.json             # å¯¦é©—éšæ®µæ¨™ç±¤é…ç½®
â”‚
â”œâ”€â”€ ui/
â”‚   â”œâ”€â”€ NewExperimentWindow.py             # æ–°å¯¦é©—ä¸»æ§åˆ¶å™¨
â”‚   â”œâ”€â”€ NewExperimentWindowWithBio.py      # ç”Ÿç†è¨Šè™Ÿæ•´åˆç‰ˆæ§åˆ¶å™¨ â­
â”‚   â”œâ”€â”€ EventLogger.py                     # æ™‚é–“æˆ³è¨˜éŒ„æœå‹™
â”‚   â”œâ”€â”€ ExperimentConfig.py                # å¯¦é©—é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ MusicCatalogManager.py             # éŸ³æ¨‚ç›®éŒ„ç®¡ç†
â”‚   â”œâ”€â”€ BaselinePage.py                    # Baselineé é¢
â”‚   â”œâ”€â”€ MusicPageWithTimer.py              # éŸ³æ¨‚æ’­æ”¾é é¢ï¼ˆå«å€’æ•¸ï¼‰
â”‚   â”œâ”€â”€ IntervalPage.py                    # é–“éš”ä¼‘æ¯é é¢
â”‚   â”œâ”€â”€ QuestionPage.py                    # å•å·é é¢
â”‚   â”œâ”€â”€ ThankYouPage.py                    # å®Œæˆé é¢
â”‚   â”‚
â”‚   â””â”€â”€ json/new_experiment/               # æ–°å¯¦é©—å•å·
â”‚       â””â”€â”€ music_evaluation_new.json
â”‚
â”œâ”€â”€ music/                                 # éŸ³æ¨‚æª”æ¡ˆç›®éŒ„
â”‚   â”œâ”€â”€ Nature/        (NA001.wav, NA002.wav)
â”‚   â”œâ”€â”€ Ambient/       (AB001.wav, AB002.wav)
â”‚   â”œâ”€â”€ New-Age/       (NEA001.wav, NEA002.wav)
â”‚   â”œâ”€â”€ Instrumental/  (IN001.wav, IN002.wav)
â”‚   â”œâ”€â”€ Lo-fi/         (LO001.wav, LO002.wav)
â”‚   â””â”€â”€ Therapeutic/   (TH001.wav, TH002.wav)
â”‚
â”œâ”€â”€ sample_data/                           # æ¸¬è©¦æ•¸æ“šç¯„ä¾‹ â­
â”‚   â”œâ”€â”€ experiment_info.json
â”‚   â”œâ”€â”€ event_log.csv
â”‚   â”œâ”€â”€ bio_event_log.csv                  # ç”Ÿç†è¨Šè™Ÿäº‹ä»¶æ¨™è¨˜
â”‚   â”œâ”€â”€ bio_result_gsr.csv                 # GSR æ•¸æ“š
â”‚   â”œâ”€â”€ bio_result_hr.csv                  # å¿ƒç‡æ•¸æ“š
â”‚   â”œâ”€â”€ bio_result_skt.csv                 # çš®è†šæº«åº¦
â”‚   â””â”€â”€ ... (å…¶ä»– 9 ç¨®ç”Ÿç†è¨Šè™Ÿ)
â”‚
â”œâ”€â”€ new_experiment_results/                # å¯¦é©—çµæœç›®éŒ„
â”‚   â””â”€â”€ P{ID}_S{N}_G{A/B}_{timestamp}/
â”‚       â”œâ”€â”€ experiment_info.json
â”‚       â”œâ”€â”€ event_log.csv
â”‚       â”œâ”€â”€ music1_evaluation_*.csv
â”‚       â”œâ”€â”€ music2_evaluation_*.csv
â”‚       â”œâ”€â”€ bio_event_log.csv              # ç”Ÿç†è¨Šè™Ÿäº‹ä»¶ â­
â”‚       â””â”€â”€ bio_result_*.csv               # 9 ç¨®ç”Ÿç†è¨Šè™Ÿæ•¸æ“š â­
â”‚
â””â”€â”€ test_socket_client.py                  # Socket é€£æ¥æ¸¬è©¦å·¥å…· â­
```

---

## ğŸ§¬ ç”Ÿç†è¨Šè™Ÿæ•´åˆèªªæ˜

### **æ”¯æ´çš„ç”Ÿç†è¨Šè™Ÿï¼ˆ9 ç¨®ï¼‰**

| è¨Šè™Ÿ | è‹±æ–‡åç¨± | èªªæ˜ | æ•¸æ“šé »ç‡ |
|------|---------|------|---------|
| **GSR** | Galvanic Skin Response | çš®è†šé›»åæ‡‰ | é«˜ (~100 Hz) |
| **HR** | Heart Rate | å¿ƒç‡ | ä½ (~1 Hz) |
| **SKT** | Skin Temperature | çš®è†šæº«åº¦ | ä½ (~1 Hz) |
| **PPGRAW** | PPG Raw Data | å…‰é›»å®¹ç©æè¨˜åŸå§‹æ•¸æ“š | é«˜ (~100 Hz) |
| **PPI** | Pulse-to-Pulse Interval | è„ˆæé–“æœŸ | ä½ (~1 Hz) |
| **ACT** | Activity | æ´»å‹•é‡ | ä½ (~1 Hz) |
| **IMUX** | IMU X-axis | æ…£æ€§æ¸¬é‡å–®å…ƒ X è»¸ | ä¸­ (~10 Hz) |
| **IMUY** | IMU Y-axis | æ…£æ€§æ¸¬é‡å–®å…ƒ Y è»¸ | ä¸­ (~10 Hz) |
| **IMUZ** | IMU Z-axis | æ…£æ€§æ¸¬é‡å–®å…ƒ Z è»¸ | ä¸­ (~10 Hz) |

### **é€£æ¥æ¶æ§‹**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   Bluetooth SPP/BLE   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   WiFi Socket (TCP 8000)
â”‚  ç”Ÿç†è¨Šè™Ÿè€³æ©Ÿ    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’  â”‚  æ‰‹æ©Ÿ APP    â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’
â”‚  (Physiological  â”‚                       â”‚  (Data       â”‚
â”‚   Earphone)      â”‚                       â”‚   Collector) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                  â†‘
                                                  â”‚ UDP å»£æ’­ (9999)
                                                  â”‚ è‡ªå‹•ç™¼ç¾ä¼ºæœå™¨ IP
                                                  â”‚
                                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                           â”‚  å¯¦é©—é›»è…¦     â”‚
                                           â”‚  (Server)    â”‚
                                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### **è‡ªå‹•æœå‹™ç™¼ç¾ (UDP å»£æ’­)**

å¯¦é©—é›»è…¦æœƒè‡ªå‹•å»£æ’­ä¼ºæœå™¨è³‡è¨Šï¼Œæ‰‹æ©Ÿ APP å¯ä»¥è‡ªå‹•ç™¼ç¾ä¸¦é€£æ¥ï¼š

**å»£æ’­æ•¸æ“šæ ¼å¼ (æ¯ 3 ç§’ä¸€æ¬¡)**ï¼š
```json
{
  "service": "bio_signal_server",
  "ip": "192.168.43.1",
  "tcp_port": 8000,
  "timestamp": 1762935630.123,
  "status": "online"
}
```

- **å»£æ’­ç«¯å£**ï¼šUDP 9999
- **TCP æœå‹™ç«¯å£**ï¼š8000
- **æ‰‹æ©Ÿ APP**ï¼šç›£è½ UDP 9999ï¼Œè‡ªå‹•ç²å–ä¼ºæœå™¨ IP ä¸¦é€£æ¥

### **æ•¸æ“šå‚³è¼¸æ ¼å¼**

æ‰‹æ©Ÿ APP é€é TCP Socket ç™¼é€ JSON æ•¸æ“šï¼ˆæ¯è¡Œä¸€å€‹ JSON ç‰©ä»¶ï¼‰ï¼š

```json
{
  "GSR": 262763.0,
  "HR": 75,
  "SKT": 32.5,
  "PPGRAW": 12345,
  "PPI": 800,
  "ACT": 0.5,
  "IMUX": 0.1,
  "IMUY": 0.2,
  "IMUZ": 9.8,
  "GSR_Timestamp": "2025-11-12 16:20:32.350",
  "HR_Timestamp": "2025-11-12 16:20:32.350",
  ...
}
```

### **å•Ÿç”¨ç”Ÿç†è¨Šè™Ÿè¨˜éŒ„**

1. **å•Ÿå‹•å¯¦é©—ç¨‹å¼**
   ```bash
   python3 new_experiment_with_bio.py
   ```

2. **å‹¾é¸ã€Œå•Ÿç”¨ç”Ÿç†è¨Šè™Ÿè¨˜éŒ„ã€**
   - åœ¨é–‹å§‹é é¢å‹¾é¸æ­¤é¸é …
   - çµ‚ç«¯æœƒé¡¯ç¤ºï¼š`Server listening on 0.0.0.0:8000...`
   - å»£æ’­æœå‹™å•Ÿå‹•ï¼š`å»£æ’­ä¼ºæœå™¨è³‡è¨Š: 192.168.43.1:8000`

3. **æ‰‹æ©Ÿ APP é€£æ¥**
   - æ‰‹æ©Ÿè‡ªå‹•æ¥æ”¶ UDP å»£æ’­ï¼ˆ9999 ç«¯å£ï¼‰
   - è‡ªå‹•é€£æ¥åˆ°ä¼ºæœå™¨ï¼ˆ8000 ç«¯å£ï¼‰
   - é–‹å§‹å‚³è¼¸ç”Ÿç†è¨Šè™Ÿæ•¸æ“š

4. **æŸ¥çœ‹æ•¸æ“š**
   - çµ‚ç«¯å³æ™‚é¡¯ç¤ºï¼š`GSR: 262763.0, HR: 75, SKT: 32.5, ...`
   - æ•¸æ“šå¯«å…¥ CSVï¼š`bio_result_gsr.csv`, `bio_result_hr.csv`, ...
   - äº‹ä»¶æ¨™è¨˜ï¼š`bio_event_log.csv`

---

## âš™ï¸ å¯¦é©—åƒæ•¸èªªæ˜

### **é–‹å§‹é é¢è¨­å®š**

| åƒæ•¸ | é¸é … | èªªæ˜ |
|------|------|------|
| **å—æ¸¬è€…ç·¨è™Ÿ** | 1-30 | ç”¨æ–¼è­˜åˆ¥å—æ¸¬è€… |
| **ç¬¬å¹¾æ¬¡ä¾†** | 1-6 | è¨˜éŒ„é€™æ˜¯ç¬¬å¹¾æ¬¡å¯¦é©— |
| **éŸ³æ¨‚é¡åˆ¥** | Nature/Ambient/New-Age/Instrumental/Lo-fi/Therapeutic | æœ¬æ¬¡å¯¦é©—çš„éŸ³æ¨‚é¡åˆ¥ |
| **çµ„åˆ¥** | Açµ„/Bçµ„ | Açµ„ï¼š001â†’002ï¼ŒBçµ„ï¼š002â†’001 |
| **å•Ÿç”¨ç”Ÿç†è¨Šè™Ÿè¨˜éŒ„** | å‹¾é¸/ä¸å‹¾é¸ | æ˜¯å¦è¨˜éŒ„ç”Ÿç†è¨Šè™Ÿ â­ |

### **çµ„åˆ¥è¨­è¨ˆèªªæ˜**

- **Açµ„**ï¼šå…ˆæ’­æ”¾ 001ï¼Œå¾Œæ’­æ”¾ 002
- **Bçµ„**ï¼šå…ˆæ’­æ”¾ 002ï¼Œå¾Œæ’­æ”¾ 001
- **ç›®çš„**ï¼šå¹³è¡¡æ­Œæ›²é †åºæ•ˆæ‡‰ï¼Œç¢ºä¿æ¯é¦–æ­Œåœ¨å…©å€‹ä½ç½®éƒ½æœ‰ç›¸åŒæ•¸é‡çš„è³‡æ–™

---

## ğŸ“Š è¼¸å‡ºè³‡æ–™èªªæ˜

### **1. experiment_info.json**

è¨˜éŒ„å¯¦é©—åƒæ•¸ï¼š

```json
{
  "subject_id": 2,
  "session_number": 1,
  "group": "B",
  "category": "Nature",
  "category_code": "NA",
  "song_order": ["002", "001"],
  "music_files": ["NA002.wav", "NA001.wav"],
  "start_time": "2025-11-12 16:20:30",
  "debug_mode": true,
  "bio_signal_enabled": true,
  "bio_signal_host": "0.0.0.0",
  "bio_signal_port": 8000
}
```

### **2. event_log.csv** â­ é‡è¦

è¨˜éŒ„æ¯å€‹éšæ®µçš„ç²¾ç¢ºæ™‚é–“æˆ³ï¼ˆæ¯«ç§’ç´šï¼‰ï¼š

```csv
timestamp,event_type,phase,music_id,notes
2025-11-12 16:20:30.624,phase_start,baseline,,
2025-11-12 16:21:10.328,phase_end,baseline,,
2025-11-12 16:21:10.328,phase_start,music1,NA002,
2025-11-12 16:22:05.964,phase_end,music1,NA002,
2025-11-12 16:22:05.964,phase_start,questionnaire1,,
...
```

**éšæ®µæ¨™ç±¤**ï¼š
- `baseline` - Baselineéšæ®µ
- `music1` / `music2` - éŸ³æ¨‚æ’­æ”¾
- `questionnaire1` / `questionnaire2` - å•å·å¡«å¯«
- `interval1` / `interval2` - é–“éš”ä¼‘æ¯
- `complete` - å¯¦é©—å®Œæˆ

### **3. å•å·çµæœ CSV**

```csv
question_id,question,dimension,answer,score,timestamp
q1,ä½ ç¾åœ¨çš„å¿ƒæƒ…æ„Ÿè¦ºæ€éº¼æ¨£ï¼Ÿ,valence,æœ‰é»æ„‰å¿«,4,20251112_162211
q2,ä½ ç¾åœ¨çš„ç²¾ç¥æ„Ÿè¦ºæ€éº¼æ¨£ï¼Ÿ,arousal,æœ‰é»ç·Šç¹ƒ,4,20251112_162211
q3,ä½ è¦ºå¾—é€™é¦–æ­Œæ›²çš„æ”¾é¬†ç¨‹åº¦,relaxation,æœ‰é»æ”¾é¬†,4,20251112_162211
```

### **4. bio_event_log.csv** â­ ç”Ÿç†è¨Šè™Ÿäº‹ä»¶æ¨™è¨˜

è¨˜éŒ„å¯¦é©—éšæ®µåˆ‡æ›äº‹ä»¶ï¼ˆUnix æ™‚é–“æˆ³ï¼‰ï¼š

```csv
Timestamp,Event Type,Label
1762935630.6275108,LABEL_CHANGE,baseline
1762935670.3309865,LABEL_CHANGE,music1
1762935725.9665053,LABEL_CHANGE,questionnaire1
1762935731.0453224,LABEL_CHANGE,interval1
...
```

### **5. bio_result_*.csv** â­ ç”Ÿç†è¨Šè™Ÿæ•¸æ“š

9 ç¨®ç”Ÿç†è¨Šè™Ÿåˆ†åˆ¥å„²å­˜åœ¨ç¨ç«‹çš„ CSV æ–‡ä»¶ä¸­ï¼š

**ç¯„ä¾‹ï¼šbio_result_gsr.csv**
```csv
Time,Data,Condition,Current,Label
2025-11-12 16:20:32.350,262763.0,None,baseline,None
2025-11-12 16:20:32.350,262516.0,None,baseline,None
2025-11-12 16:20:32.350,262901.0,None,baseline,None
...
```

**æª”æ¡ˆåˆ—è¡¨**ï¼š
- `bio_result_gsr.csv` - çš®è†šé›»åæ‡‰
- `bio_result_hr.csv` - å¿ƒç‡
- `bio_result_skt.csv` - çš®è†šæº«åº¦
- `bio_result_ppgraw.csv` - å…‰é›»å®¹ç©æè¨˜åŸå§‹æ•¸æ“š
- `bio_result_ppi.csv` - è„ˆæé–“æœŸ
- `bio_result_act.csv` - æ´»å‹•é‡
- `bio_result_imux.csv` - IMU X è»¸
- `bio_result_imuy.csv` - IMU Y è»¸
- `bio_result_imuz.csv` - IMU Z è»¸

**æ¬„ä½èªªæ˜**ï¼š
- **Time**: æ™‚é–“æˆ³ï¼ˆå®¢æˆ¶ç«¯æˆ–ä¼ºæœå™¨ç”Ÿæˆï¼‰
- **Data**: ç”Ÿç†è¨Šè™Ÿæ•¸å€¼
- **Condition**: æ¢ä»¶æ¨™è¨˜ï¼ˆä¿ç•™æ¬„ä½ï¼Œç›®å‰ç‚º Noneï¼‰
- **Current**: ç•¶å‰å¯¦é©—éšæ®µï¼ˆå¦‚ baseline, music1ï¼‰
- **Label**: æ¨™ç±¤ï¼ˆä¿ç•™æ¬„ä½ï¼Œç›®å‰ç‚º Noneï¼‰

---

## ğŸ§ª æ¸¬è©¦èˆ‡é©—è­‰

### **æ¸¬è©¦ç”Ÿç†è¨Šè™Ÿé€£æ¥**

#### **æ­¥é©Ÿ 1: å•Ÿå‹•å¯¦é©—ç¨‹å¼**

```bash
python3 new_experiment_with_bio.py
```

- å‹¾é¸ã€Œå•Ÿç”¨ç”Ÿç†è¨Šè™Ÿè¨˜éŒ„ã€
- é»æ“Šã€Œé–‹å§‹å¯¦é©—ã€
- è§€å¯Ÿçµ‚ç«¯è¼¸å‡ºï¼š
  ```
  Server listening on 0.0.0.0:8000...
  æœ¬æ©ŸIP: 192.168.43.1
  å»£æ’­æœå‹™å·²å•Ÿå‹•
  ç·©è¡å€è™•ç†ç·šç¨‹å·²å•Ÿå‹•
  å»£æ’­ä¼ºæœå™¨è³‡è¨Š: 192.168.43.1:8000
  ```

#### **æ­¥é©Ÿ 2: ä½¿ç”¨æ¸¬è©¦å®¢æˆ¶ç«¯**

åœ¨**å¦ä¸€å€‹çµ‚ç«¯**åŸ·è¡Œï¼š

```bash
# æ¸¬è©¦æœ¬æ©Ÿé€£æ¥
python3 test_socket_client.py 127.0.0.1

# æ¸¬è©¦ç¶²è·¯é€£æ¥ï¼ˆæ›¿æ›æˆå¯¦éš› IPï¼‰
python3 test_socket_client.py 192.168.43.1
```

#### **æ­¥é©Ÿ 3: é©—è­‰æ•¸æ“šæ¥æ”¶**

**çµ‚ç«¯æ‡‰é¡¯ç¤º**ï¼š
```
âœ… æˆåŠŸé€£æ¥åˆ° 127.0.0.1:8000
æœ¬åœ°ç«¯å£: ('127.0.0.1', 53732)

é–‹å§‹ç™¼é€æ¸¬è©¦æ•¸æ“š...
  ç™¼é€ #1: GSR=45.2, HR=75
  ç™¼é€ #2: GSR=45.3, HR=76
  ç™¼é€ #3: GSR=45.4, HR=77
  ç™¼é€ #4: GSR=45.5, HR=78
  ç™¼é€ #5: GSR=45.6, HR=79

âœ… æ¸¬è©¦å®Œæˆï¼æª¢æŸ¥é›»è…¦çµ‚ç«¯æ˜¯å¦é¡¯ç¤ºç”Ÿç†è¨Šè™Ÿæ•¸æ“šã€‚
```

**å¯¦é©—ç¨‹å¼çµ‚ç«¯æ‡‰é¡¯ç¤º**ï¼š
```
Connected by ('127.0.0.1', 53732)
GSR: 45.2, HR: 75, SKT: 32.5
GSR: 45.3, HR: 76, SKT: 32.5
GSR: 45.4, HR: 77, SKT: 32.5
...
```

#### **æ­¥é©Ÿ 4: æª¢æŸ¥ CSV æ–‡ä»¶**

```bash
# æŸ¥çœ‹ç”Ÿç†è¨Šè™Ÿæ•¸æ“š
cat new_experiment_results/P*/bio_result_gsr.csv
cat new_experiment_results/P*/bio_result_hr.csv

# æŸ¥çœ‹äº‹ä»¶æ¨™è¨˜
cat new_experiment_results/P*/bio_event_log.csv
```

### **æŸ¥çœ‹æ¸¬è©¦ç¯„ä¾‹**

å°ˆæ¡ˆåŒ…å«å®Œæ•´çš„æ¸¬è©¦æ•¸æ“šç¯„ä¾‹ï¼š

```bash
ls -lh sample_data/

# è¼¸å‡ºï¼š
# bio_event_log.csv          (374 bytes)
# bio_result_gsr.csv         (189 KB - 3729 è¡Œ)
# bio_result_hr.csv          (12 KB - 254 è¡Œ)
# bio_result_skt.csv         (90 KB - 1920 è¡Œ)
# ...
# event_log.csv              (789 bytes)
# experiment_info.json       (360 bytes)
# music1_evaluation_*.csv    (298 bytes)
# music2_evaluation_*.csv    (298 bytes)
```

---

## ğŸµ éŸ³æ¨‚æª”æ¡ˆæº–å‚™

### **æª”æ¡ˆå‘½åè¦å‰‡**

| é¡åˆ¥ | ä»£ç¢¼ | æª”æ¡ˆåç¨±ç¯„ä¾‹ |
|------|------|-------------|
| Nature | NA | NA001.wav, NA002.wav |
| Ambient | AB | AB001.wav, AB002.wav |
| New-Age | NEA | NEA001.wav, NEA002.wav |
| Instrumental | IN | IN001.wav, IN002.wav |
| Lo-fi | LO | LO001.wav, LO002.wav |
| Therapeutic | TH | TH001.wav, TH002.wav |

### **ç›®éŒ„çµæ§‹**

```
music/
  â”œâ”€â”€ Nature/
  â”‚   â”œâ”€â”€ NA001.wav
  â”‚   â””â”€â”€ NA002.wav
  â”œâ”€â”€ Ambient/
  â”‚   â”œâ”€â”€ AB001.wav
  â”‚   â””â”€â”€ AB002.wav
  ... (å…¶ä»–é¡åˆ¥)
```

### **æª”æ¡ˆæ ¼å¼**
- **æ ¼å¼**ï¼šWAVï¼ˆå„ªå…ˆï¼‰
- **å»ºè­°**ï¼š16-bit, 44.1kHz æˆ–æ›´é«˜
- **é•·åº¦**ï¼šè‡³å°‘5åˆ†é˜

---

## ğŸ› é™¤éŒ¯æ¨¡å¼

### **å•Ÿç”¨æ–¹å¼**

ä¿®æ”¹å•Ÿå‹•æª”æ¡ˆä¸­çš„ï¼š
```python
DEBUG_MODE = True  # é™¤éŒ¯æ¨¡å¼
```

### **é™¤éŒ¯æ¨¡å¼åŠŸèƒ½**

- âœ… **Baselineé é¢**ï¼šé¡¯ç¤ºã€Œè·³éã€æŒ‰éˆ•
- âœ… **éŸ³æ¨‚æ’­æ”¾**ï¼šé¡¯ç¤ºã€Œè·³éã€æŒ‰éˆ•
- âœ… **é–“éš”ä¼‘æ¯**ï¼šç«‹å³å•Ÿç”¨ã€Œç¹¼çºŒã€æŒ‰éˆ•ï¼ˆç„¡éœ€ç­‰å¾…3åˆ†é˜ï¼‰
- âœ… **è¦–çª—æ¨™é¡Œ**ï¼šé¡¯ç¤º `[é™¤éŒ¯æ¨¡å¼]` æ¨™è¨˜
- âœ… **ç”Ÿç†è¨Šè™Ÿ**ï¼šæ­£å¸¸è¨˜éŒ„ï¼ˆå¯ç”¨æ–¼æ¸¬è©¦æ•¸æ“šæ ¼å¼ï¼‰

### **æ­£å¼æ¨¡å¼**

```python
DEBUG_MODE = False  # æ­£å¼æ¨¡å¼
```

- â± Baselineï¼šå¿…é ˆç­‰å¾…3åˆ†é˜
- â± éŸ³æ¨‚æ’­æ”¾ï¼šå¿…é ˆæ’­æ”¾å®Œ5åˆ†é˜
- â± é–“éš”ä¼‘æ¯ï¼šè‡³å°‘3åˆ†é˜å¾Œæ‰èƒ½é»æ“Šç¹¼çºŒ

---

## ğŸ”§ å•å·å…§å®¹

### **éŸ³æ¨‚è©•ä¼°å•å·ï¼ˆ3é¡Œï¼‰**

1. **ä½ ç¾åœ¨çš„å¿ƒæƒ…æ„Ÿè¦ºæ€éº¼æ¨£ï¼Ÿ** (valence)
   - é¸é …ï¼šéå¸¸ä¸å¥½ / æœ‰é»ä¸å¥½ / æ™®é€š / æœ‰é»æ„‰å¿« / éå¸¸æ„‰å¿«

2. **ä½ ç¾åœ¨çš„ç²¾ç¥æ„Ÿè¦ºæ€éº¼æ¨£ï¼Ÿ** (arousal)
   - é¸é …ï¼šéå¸¸å¹³éœ / æœ‰é»æ”¾é¬† / æ™®é€š / æœ‰é»ç·Šç¹ƒ / éå¸¸äº¢å¥®

3. **ä½ è¦ºå¾—é€™é¦–æ­Œæ›²çš„æ”¾é¬†ç¨‹åº¦** (relaxation)
   - é¸é …ï¼šéå¸¸ç·Šç¹ƒ / æœ‰é»ç·Šç¹ƒ / æ™®é€š / æœ‰é»æ”¾é¬† / éå¸¸æ”¾é¬†

### **ä¿®æ”¹å•å·**

ç·¨è¼¯æª”æ¡ˆï¼š`ui/json/new_experiment/music_evaluation_new.json`

---

## ğŸ“ˆ è³‡æ–™åˆ†æ

### **æ™‚é–“æˆ³åŒæ­¥åˆ†æ**

çµåˆ `event_log.csv` å’Œ `bio_event_log.csv` é€²è¡Œç²¾ç¢ºçš„æ™‚åºåˆ†æï¼š

```python
import pandas as pd
from datetime import datetime

# è¼‰å…¥äº‹ä»¶æ—¥èªŒ
events = pd.read_csv('new_experiment_results/P002_S1_GB_*/event_log.csv')
bio_events = pd.read_csv('new_experiment_results/P002_S1_GB_*/bio_event_log.csv')

# è¼‰å…¥ç”Ÿç†è¨Šè™Ÿæ•¸æ“š
gsr_data = pd.read_csv('new_experiment_results/P002_S1_GB_*/bio_result_gsr.csv')
hr_data = pd.read_csv('new_experiment_results/P002_S1_GB_*/bio_result_hr.csv')

# è½‰æ›æ™‚é–“æˆ³
events['timestamp'] = pd.to_datetime(events['timestamp'])
gsr_data['Time'] = pd.to_datetime(gsr_data['Time'])

# æå– baseline éšæ®µçš„ GSR æ•¸æ“š
baseline_start = events[(events['phase']=='baseline') &
                        (events['event_type']=='phase_start')]['timestamp'].iloc[0]
baseline_end = events[(events['phase']=='baseline') &
                      (events['event_type']=='phase_end')]['timestamp'].iloc[0]

baseline_gsr = gsr_data[(gsr_data['Time'] >= baseline_start) &
                        (gsr_data['Time'] <= baseline_end)]

print(f"Baseline GSR å¹³å‡å€¼: {baseline_gsr['Data'].mean():.2f}")
print(f"Baseline GSR æ¨™æº–å·®: {baseline_gsr['Data'].std():.2f}")

# æå– music1 éšæ®µçš„å¿ƒç‡æ•¸æ“š
music1_start = events[(events['phase']=='music1') &
                      (events['event_type']=='phase_start')]['timestamp'].iloc[0]
music1_end = events[(events['phase']=='music1') &
                    (events['event_type']=='phase_end')]['timestamp'].iloc[0]

music1_hr = hr_data[(hr_data['Time'] >= music1_start) &
                    (hr_data['Time'] <= music1_end)]

print(f"Music1 å¿ƒç‡å¹³å‡å€¼: {music1_hr['Data'].mean():.2f} bpm")
```

### **ç¯„ä¾‹åˆ†æè…³æœ¬**

æŸ¥çœ‹ `sample_data/` è³‡æ–™å¤¾ä¸­çš„å®Œæ•´æ¸¬è©¦æ•¸æ“šç¯„ä¾‹ã€‚

---

## â“ å¸¸è¦‹å•é¡Œ

### **Q: å¦‚ä½•æ¸¬è©¦ç³»çµ±ï¼Ÿ**
A: é–‹å•Ÿé™¤éŒ¯æ¨¡å¼ï¼ˆDEBUG_MODE = Trueï¼‰ï¼Œå¯å¿«é€Ÿæ¸¬è©¦å®Œæ•´æµç¨‹ã€‚

### **Q: éŸ³æª”æ‰¾ä¸åˆ°æ€éº¼è¾¦ï¼Ÿ**
A:
1. ç¢ºèªæª”æ¡ˆå‘½åæ­£ç¢ºï¼ˆå¦‚ NA001.wavï¼‰
2. ç¢ºèªæª”æ¡ˆæ”¾åœ¨æ­£ç¢ºç›®éŒ„ï¼ˆå¦‚ music/Nature/NA001.wavï¼‰
3. æª¢æŸ¥æª”æ¡ˆæ ¼å¼ç‚º .wav

### **Q: å¦‚ä½•ä¿®æ”¹æ™‚é–“è¨­å®šï¼Ÿ**
A: ç·¨è¼¯ `ui/ExperimentConfig.py` ä¸­çš„åƒæ•¸ï¼š
```python
class ExperimentConfig:
    def __init__(self):
        self.baseline_duration = 180      # 3åˆ†é˜ â†’ å¯ä¿®æ”¹
        self.music_duration = 300         # 5åˆ†é˜ â†’ å¯ä¿®æ”¹
        self.interval_min_duration = 180  # è‡³å°‘3åˆ†é˜ â†’ å¯ä¿®æ”¹
```

### **Q: ç”Ÿç†è¨Šè™Ÿç„¡æ³•é€£æ¥ï¼Ÿ**
A:
1. ç¢ºèªå¯¦é©—ç¨‹å¼å·²å•Ÿå‹•ä¸¦å‹¾é¸ã€Œå•Ÿç”¨ç”Ÿç†è¨Šè™Ÿè¨˜éŒ„ã€
2. æª¢æŸ¥çµ‚ç«¯æ˜¯å¦é¡¯ç¤º `Server listening on 0.0.0.0:8000...`
3. ç¢ºèªæ‰‹æ©Ÿå’Œé›»è…¦åœ¨åŒä¸€ç¶²è·¯ï¼ˆæ‰‹æ©Ÿç†±é»ï¼‰
4. ä½¿ç”¨ `test_socket_client.py` æ¸¬è©¦é€£æ¥
5. æª¢æŸ¥é˜²ç«ç‰†æ˜¯å¦é˜»æ“‹ 8000 ç«¯å£

### **Q: ç”Ÿç†è¨Šè™Ÿæœ‰æ•¸æ“šä½†æ²’å¯«å…¥ CSVï¼Ÿ**
A: é€™å€‹å•é¡Œå·²åœ¨ v2.2 ä¿®å¾©ã€‚ç¢ºèªä½ ä½¿ç”¨çš„æ˜¯æœ€æ–°ç‰ˆæœ¬ï¼š
```bash
git pull origin main
```

### **Q: æ‰‹æ©Ÿ APP å¦‚ä½•è‡ªå‹•ç™¼ç¾ä¼ºæœå™¨ï¼Ÿ**
A: æ‰‹æ©Ÿ APP éœ€è¦ç›£è½ UDP 9999 ç«¯å£æ¥æ”¶å»£æ’­æ•¸æ“šï¼Œç„¶å¾Œé€£æ¥åˆ°å»£æ’­çš„ IP å’Œç«¯å£ã€‚

### **Q: å¦‚ä½•æŸ¥çœ‹å³æ™‚ç”Ÿç†è¨Šè™Ÿï¼Ÿ**
A: å¯¦é©—ç¨‹å¼çš„çµ‚ç«¯æœƒæ¯ç§’é¡¯ç¤ºæœ€æ–°çš„ç”Ÿç†è¨Šè™Ÿæ•¸å€¼ã€‚

---

## ğŸ”„ èˆ‡èˆŠç³»çµ±çš„å·®ç•°

| é …ç›® | èˆŠç³»çµ± (armo_eq.py) | æ–°ç³»çµ± (new_experiment_with_bio.py) |
|------|---------------------|-------------------------------------|
| **éŸ³æ¨‚é¡å‹** | å¤å…¸/æµè¡Œ/çˆµå£« | Nature/Ambient/New-Age/Instrumental/Lo-fi/Therapeutic |
| **å¯¦é©—è¨­è¨ˆ** | EQ vs. åŸå§‹éŸ³æ¨‚ | Açµ„ vs. Bçµ„ï¼ˆæ­Œæ›²é †åºï¼‰ |
| **æ¯è¼ªæ­Œæ›²æ•¸** | 2é¦–ï¼ˆEQ + åŸå§‹ï¼‰ | 2é¦–ï¼ˆ001 + 002ï¼‰ |
| **æ™‚é–“è¨˜éŒ„** | ç„¡ | event_log.csv ç²¾ç¢ºè¨˜éŒ„ â­ |
| **Baseline** | ç„¡ | 3åˆ†é˜ Baseline â­ |
| **é–“éš”ä¼‘æ¯** | ç„¡ | è‡³å°‘3åˆ†é˜é–“éš” â­ |
| **å•å·** | 7é¡Œè©•ä¼°å•å· | 3é¡Œè©•ä¼°å•å·ï¼ˆvalence, arousal, relaxationï¼‰ |
| **ç”Ÿç†è¨Šè™Ÿ** | ç„¡ | 9 ç¨®ç”Ÿç†è¨Šè™ŸåŒæ­¥è¨˜éŒ„ â­ |
| **è‡ªå‹•ç™¼ç¾** | ç„¡ | UDP å»£æ’­è‡ªå‹•ç™¼ç¾ä¼ºæœå™¨ â­ |

---

## ğŸ“ æŠ€è¡“æ”¯æ´

å¦‚æœ‰å•é¡Œï¼Œè«‹æª¢æŸ¥ï¼š
1. æª”æ¡ˆçµæ§‹æ˜¯å¦æ­£ç¢º
2. éŸ³æ¨‚æª”æ¡ˆæ˜¯å¦å­˜åœ¨
3. Python ç‰ˆæœ¬ â‰¥ 3.10
4. PySide6 æ˜¯å¦å·²å®‰è£
5. ç”Ÿç†è¨Šè™Ÿé€£æ¥æ˜¯å¦æ­£å¸¸ï¼ˆæŸ¥çœ‹çµ‚ç«¯è¼¸å‡ºï¼‰
6. æŸ¥çœ‹ `sample_data/` æ¸¬è©¦æ•¸æ“šç¯„ä¾‹
7. æŸ¥çœ‹ `PROJECT_STRUCTURE.md` äº†è§£å°ˆæ¡ˆçµæ§‹

---

## ğŸ“š ç›¸é—œæ–‡æª”

- **PROJECT_STRUCTURE.md** - å°ˆæ¡ˆçµæ§‹ç¸½è¦½ï¼Œå€åˆ†èˆŠ/æ–°å¯¦é©—ã€é€šç”¨æ¨¡çµ„
- **sample_data/** - å®Œæ•´æ¸¬è©¦æ•¸æ“šç¯„ä¾‹
- **test_socket_client.py** - Socket é€£æ¥æ¸¬è©¦å·¥å…·

---

**ç¥å¯¦é©—é †åˆ©ï¼** ğŸµ ğŸ§¬
